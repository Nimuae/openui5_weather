<!DOCTYPE HTML>
<!-- Author Dominic Holzwarth -->
<html>
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta http-equiv='Content-Type' content='text/html;charset=UTF-8'/>
		
		<script src="/resources/sap-ui-core.js"
				id="sap-ui-bootstrap"
				data-sap-ui-libs="sap.ui.core, sap.m"
				data-sap-ui-xx-bindingSyntax="complex"
				data-sap-ui-resourceroots='{"hss.weather": "./../"}'
				data-sap-ui-preload="async"
				data-sap-ui-theme="sap_bluecrystal">
		</script>

		<link rel="stylesheet" href="../style/style.css" />
		
		<script>
			jQuery.sap.require("sap.m.App");
			jQuery.sap.require("sap.m.Page");
			jQuery.sap.require("hss.weather.control.Rainometer");
			jQuery.sap.require("hss.weather.control.CircleProgress");
			jQuery.sap.require("hss.weather.control.Compass");
			
			var oApp = new sap.m.App({
				pages: [
					new sap.m.Page({
						title: "Rainometer Test",
						backgroundDesign: "Solid",
						content: [
							oRain = new hss.weather.control.Rainometer({
								value: "{/value}",
								overlay: "../icons/raindrop.svg",
								showValue: true,
								unit: "mm",
								max: 200
							}),
							oBtnMore = new sap.m.Button({
								icon: "sap-icon://add",
								press: function(oEvent){
									this.getModel().setProperty("/value", this.getModel().getProperty("/value") + 10);
								}
							}),
							oBtnLess = new sap.m.Button({
								icon: "sap-icon://less",
								press: function(oEvent){
									this.getModel().setProperty("/value", this.getModel().getProperty("/value") - 10);
								}
							}),
							oProgress = new hss.weather.control.CircleProgress({
								value: "{/value}",
								max: {
									path: "/dat",
									formatter: function(vals){
										if(!vals){
											return 100;
										}
										var max = 100;
										for(var i = 0; i < vals.length; i++){
											max = Math.max(max, vals[i].precip);
										}
										return max;
									}
								}
							}),
							oCompass = new hss.weather.control.Compass({
								direction: "{=${/value} * 3.6}"
							})
						]
					})
				]
			});
			oApp.setModel(new sap.ui.model.json.JSONModel({
				value: 25,
				dat: [
					{
						precip: 0
					}, {
						precip: 200
					}, {
						precip: 0
					}
				]
			}));
			oApp.placeAt("content");
		</script>
		
	</head>
	<body class="sapUiBody" role="application" id="content">
	</body>
</html>