/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','sap/ui/thirdparty/URI','jquery.sap.strings'],function(q,U){"use strict";
//License granted by Douglas Crockford to SAP, Apache License 2.0
//    (http://www.apache.org/licenses/LICENSE-2.0)
var u=f.bind(null,undefined),d={"Array":Array,"Boolean":Boolean,"Date":Date,"encodeURIComponent":encodeURIComponent,"Infinity":Infinity,"isFinite":isFinite,"isNaN":isNaN,"JSON":JSON,"Math":Math,"NaN":NaN,"Number":Number,"Object":Object,"odata":{"compare":function(){var O;q.sap.require("sap.ui.model.odata.ODataUtils");O=sap.ui.require("sap/ui/model/odata/ODataUtils");return O.compare.apply(O,arguments);},"fillUriTemplate":function(){if(!U.expand){q.sap.require("sap.ui.thirdparty.URITemplate");}return U.expand.apply(U,arguments).toString();},"uriEncode":function(){var O;q.sap.require("sap.ui.model.odata.ODataUtils");O=sap.ui.require("sap/ui/model/odata/ODataUtils");return O.formatValue.apply(O,arguments);}},"parseFloat":parseFloat,"parseInt":parseInt,"RegExp":RegExp,"String":String,"undefined":undefined},r=/\d/,a=/[a-z]\w*/i,b=/[a-z]/i,s={"BINDING":{led:k,nud:function(T,o){return B.bind(null,T.value);}},"IDENTIFIER":{led:k,nud:function(T,o){if(!(T.value in o.globals)){q.sap.log.warning("Unsupported global identifier '"+T.value+"' in expression parser input '"+o.input+"'",undefined,"sap.ui.base.ExpressionParser");}return f.bind(null,o.globals[T.value]);}},"CONSTANT":{led:k,nud:function(T,o){return f.bind(null,T.value);}},".":{lbp:18,led:function(T,o,L){return D.bind(null,L,o.advance("IDENTIFIER").value);},nud:k},"(":{lbp:17,led:function(T,o,L){var e=[],i=true;while(o.current().id!==")"){if(i){i=false;}else{o.advance(",");}e.push(o.expression(0));}o.advance(")");return F.bind(null,L,e);},nud:function(T,o){var v=o.expression(0);o.advance(")");return v;}},"[":{lbp:18,led:function(T,o,L){var n=o.expression(0);o.advance("]");return P.bind(null,L,n);},nud:function(T,o){var e=[],i=true;while(o.current().id!=="]"){if(i){i=false;}else{o.advance(",");}e.push(o.current().id===","?u:o.expression(0));}o.advance("]");return A.bind(null,e);}},"!":{lbp:15,led:k,nud:function(T,o){return g.bind(null,o.expression(this.lbp),function(x){return!x;});}},"typeof":{lbp:15,led:k,nud:function(T,o){return g.bind(null,o.expression(this.lbp),function(x){return typeof x;});}},"?":{lbp:4,led:function(T,o,L){var e,i;i=o.expression(this.lbp-1);o.advance(":");e=o.expression(this.lbp-1);return C.bind(null,L,i,e);},nud:k},")":{led:k,nud:k},"]":{led:k,nud:k},"{":{led:k,nud:function(T,o){var e=true,K,i={},v;while(o.current().id!=="}"){if(e){e=false;}else{o.advance(",");}if(o.current()&&o.current().id==="CONSTANT"&&typeof o.current().value==="string"){K=o.advance().value;}else{K=o.advance("IDENTIFIER").value;}o.advance(":");v=o.expression(0);i[K]=v;}o.advance("}");return M.bind(null,i);}},"}":{lbp:-1,led:k,nud:k},",":{led:k,nud:k},":":{led:k,nud:k}},t=["===","!==","!","||","&&",".","(",")","{","}",":",",","?","*","/","%","+","-","<=","<",">=",">","[","]"],c;t.forEach(function(T,i){t[i]=q.sap.escapeRegExp(T);});c=new RegExp(t.join("|"),"g");h("*",14,function(x,y){return x*y;});h("/",14,function(x,y){return x/y;});h("%",14,function(x,y){return x%y;});h("+",13,function(x,y){return x+y;}).nud=function(T,o){return g.bind(null,o.expression(this.lbp),function(x){return+x;});};h("-",13,function(x,y){return x-y;}).nud=function(T,o){return g.bind(null,o.expression(this.lbp),function(x){return-x;});};h("<=",11,function(x,y){return x<=y;});h("<",11,function(x,y){return x<y;});h(">=",11,function(x,y){return x>=y;});h(">",11,function(x,y){return x>y;});h("in",11,function(x,y){return x in y;});h("===",10,function(x,y){return x===y;});h("!==",10,function(x,y){return x!==y;});h("&&",7,function(x,y){return x&&y();},true);h("||",6,function(x,y){return x||y();},true);function A(e,n){var R=[];e.forEach(function(o,i){R[i]=o(n);});return R;}function B(i,e){return e[i];}function C(e,T,E,i){return e(i)?T(i):E(i);}function f(v){return v;}function D(L,i,e){var o=L(e),v=o[i];return typeof v==="function"?v.bind(o):v;}function F(L,e,n){var R=[];e.forEach(function(o,i){R[i]=o(n);});return L(n).apply(null,R);}function I(L,R,o,e,i){return o(L(i),e?R.bind(null,i):R(i));}function M(e,i){var K,R={};for(K in e){R[K]=e[K](i);}return R;}function P(L,n,e){return L(e)[n(e)];}function g(R,o,e){return o(R(e));}function h(i,e,o,L){s[i]={lbp:e,led:function(T,n,v){var w=L?this.lbp-1:this.lbp;return I.bind(null,v,n.expression(w),o,L);},nud:k};return s[i];}function j(e,i,n){var E=new SyntaxError(e);E.at=n;E.text=i;if(n!==undefined){e+=" at position "+n;}q.sap.log.error(e,i,"sap.ui.base.ExpressionParser");throw E;}function k(T){var e=T.input.slice(T.start,T.end);j("Unexpected "+T.id+(e!==T.id?": "+e:""),T.input,T.start+1);}function l(R,i,S){var n=[],t=[],T=q.sap._createJSTokenizer();function o(){var v,w,x,y,z;T.white();v=T.getCh();x=T.getIndex();if(b.test(v)){y=a.exec(i.slice(x));switch(y[0]){case"false":case"null":case"true":z={id:"CONSTANT",value:T.word()};break;case"in":case"typeof":z={id:y[0]};T.setIndex(x+y[0].length);break;default:z={id:"IDENTIFIER",value:y[0]};T.setIndex(x+y[0].length);}}else if(r.test(v)||v==="."&&r.test(i.charAt(T.getIndex()+1))){z={id:"CONSTANT",value:T.number()};}else if(v==="'"||v==='"'){z={id:"CONSTANT",value:T.string()};}else if(v==="$"){T.next("$");T.next("{");w=R(i,T.getIndex()-1);z={id:"BINDING",value:n.length};n.push(w.result);T.setIndex(w.at);}else{c.lastIndex=x;y=c.exec(i);if(!y||y.index!==x){return false;}z={id:y[0]};T.setIndex(x+y[0].length);}z.input=i;z.start=x;z.end=T.getIndex();t.push(z);return true;}T.init(i,S);try{while(o()){}}catch(e){if(e.name==="SyntaxError"){j(e.message,e.text,e.at);}else{throw e;}}return{at:T.getIndex(),parts:n,tokens:t};}function m(e,i){return function(){try{return e.apply(this,arguments);}catch(n){q.sap.log.warning(String(n),i,"sap.ui.base.ExpressionParser");}};}function p(t,i,G){var e,n=0,o={advance:v,current:w,expression:x,globals:G,input:i},T;function v(E){var T=t[n];if(E){if(!T){j("Expected "+E+" but instead saw end of input",i);}else if(T.id!==E){j("Expected "+E+" but instead saw "+i.slice(T.start,T.end),i,T.start+1);}}n+=1;return T;}function w(){return t[n];}function x(y){var L;T=v();if(!T){j("Expected expression but instead saw end of input",i);}L=s[T.id].nud(T,o);while(n<t.length){T=w();if(y>=(s[T.id].lbp||0)){break;}v();L=s[T.id].led(T,o,L);}return L;}e=x(0);return{at:w()?w().start:undefined,formatter:m(e,i)};}return{parse:function(R,i,S,G){var o,T;T=l(R,i,S);o=p(T.tokens,i,G||d);if(!T.parts.length){return{constant:o.formatter(),at:o.at||T.at};}function e(){return o.formatter(arguments);}e.textFragments=true;return{result:{formatter:e,parts:T.parts},at:o.at||T.at};}};},true);
