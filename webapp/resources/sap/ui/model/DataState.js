/*!
 * UI development toolkit for HTML5 (OpenUI5)
 * (c) Copyright 2009-2015 SAP SE or an SAP affiliate company.
 * Licensed under the Apache License, Version 2.0 - see LICENSE.txt.
 */
sap.ui.define(['jquery.sap.global','../base/Object'],function(q,B){"use strict";var D=B.extend("sap.ui.model.DataState",{metadata:{},constructor:function(){this.mProperties={modelMessages:null,controlMessages:null,laundering:false,originalValue:null,originalInternalValue:null,value:null,invalidValue:null};this._bChanged=true;this.mChangedProperties={};}});D.prototype._updateProperty=function(p,v){if(this._bChanged===false){this.mChangedProperties={};}if(!q.sap.equal(this.mProperties[p],v)){var d=this.isDirty();if(!(p in this.mChangedProperties)){this.mChangedProperties[p]={oldValue:q.isArray(this.mProperties[p])?this.mProperties[p].slice(0):this.mProperties[p]};if(p==="modelMessages"||p==="controlMessages"){if(this.getMessages()){this.mChangedProperties["messages"]={oldValue:this.getMessages().slice(0)};}else{this.mChangedProperties["messages"]={oldValue:null};}if(q.isArray(v)){v=v.slice(0);}else{v=null;}}}this.mProperties[p]=v;if((!("dirty"in this.mChangedProperties))&&d!==this.isDirty()){this.mChangedProperties.dirty={oldValue:d};}this._bChanged=true;}return this;};D.prototype.getProperty=function(p){if(p==="messages"){return this.getMessages();}if(p==="dirty"){return this.isDirty();}return this.mProperties[p];};D.prototype.getMessages=function(){var m=null,c=this.getControlMessages(),M=this.getModelMessages();if(M||c){m=[].concat(M?M:[],c?c:[]);}return m;};D.prototype.setModelMessages=function(m){return this._updateProperty("modelMessages",m||null);};D.prototype.getModelMessages=function(){return this.getProperty("modelMessages");};D.prototype.setControlMessages=function(m){return this._updateProperty("controlMessages",m||null);};D.prototype.getControlMessages=function(){return this.getProperty("controlMessages");};D.prototype.isDirty=function(){return this.isControlDirty()||!q.sap.equal(this.mProperties.value,this.mProperties.originalValue);};D.prototype.isControlDirty=function(){return this.mProperties.invalidValue!==null&&(!q.sap.equal(this.mProperties.invalidValue,this.mProperties.value)||!q.sap.equal(this.mProperties.invalidValue,this.mProperties.originalValue));};D.prototype.isLaundering=function(){return this.getProperty("laundering");};D.prototype.setLaundering=function(l){return this._updateProperty("laundering",l);};D.prototype.getValue=function(v){return this.getProperty("value");};D.prototype.setValue=function(v){return this._updateProperty("value",v);};D.prototype.getInternalValue=function(v){return this.getProperty("internalValue");};D.prototype.setInternalValue=function(i){return this._updateProperty("internalValue",i);};D.prototype.getInvalidValue=function(){return this.getProperty("invalidValue");};D.prototype.setInvalidValue=function(i){return this._updateProperty("invalidValue",i);};D.prototype.getOriginalValue=function(){return this.getProperty("originalValue");};D.prototype.setOriginalValue=function(o){return this._updateProperty("originalValue",o);};D.prototype.getOriginalInternalValue=function(){return this.getProperty("originalInternalValue");};D.prototype.setOriginalInternalValue=function(o){return this._updateProperty("originalInternalValue",o);};D.prototype.changed=function(n){if(typeof n==="boolean"){this._bChanged=n;return;}return this._bChanged;};D.prototype.getChanges=function(){for(var n in this.mChangedProperties){var v=this.getProperty(n);if(this.mChangedProperties[n].oldValue===v){delete this.mChangedProperties[n];}else{this.mChangedProperties[n].value=q.isArray(v)?v.slice(0):v;}}return this.mChangedProperties;};return D;});
